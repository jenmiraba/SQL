# Calendar Table Generation Stored Procedure

## Overview

This repository contains a MySQL stored procedure for generating a comprehensive calendar table. The procedure populates a table with dates and various date-related attributes, which is crucial for time-based analysis in data warehousing and business intelligence applications.

## Purpose of the Stored Procedure

The stored procedure aims to create a calendar dimension table, a fundamental component in many data warehouse schemas. This table allows for easy querying of date-related information and facilitates time-based analysis across various granularities (day, month, quarter, year).

## Case Studies and Business Use Cases 📊

1. 📈 Sales Analysis: Analyze sales trends over time, identifying seasonal patterns or year-over-year growth.
2. 🏥 Healthcare: Track patient visits or treatment schedules across different time periods.
3. 🏦 Financial Reporting: Generate monthly, quarterly, or annual financial reports with ease.
4. 🛒 Inventory Management: Monitor stock levels and reorder patterns throughout the year.
5. 🎯 Marketing Campaigns: Plan and analyze the performance of time-based marketing initiatives.

## Generic Code

```sql
DELIMITER //
CREATE PROCEDURE [schema_name].[procedure_name](IN start_date DATE, IN end_date DATE)
BEGIN
    DECLARE current_date DATE;
    SET current_date = start_date;
    WHILE current_date <= end_date DO
        INSERT INTO [schema_name].[table_name] VALUES (
           [date_key],
           [full_date],
           [year],
           [month],
           [day],
           [quarter],
           [week_of_year],
           [day_name],
           [month_name],
           [is_weekday],
           [is_weekend]);
        SET current_date = ADDDATE(current_date, INTERVAL 1 DAY);
    END WHILE;
END
//
DELIMITER ;
```

## Example of Code

```sql
# Clear the existing data
TRUNCATE program_sql.CALENDARIO;

# Create the stored procedure
DELIMITER //
CREATE PROCEDURE program_sql.CREA_CALENDARIO(IN startdate DATE, IN stopdate DATE)
BEGIN
    DECLARE currentdate DATE;
    SET currentdate = startdate;
    WHILE currentdate <= stopdate DO
        INSERT INTO program_sql.CREA_CALENDARIO VALUES (
           YEAR(currentdate)*10000+MONTH(currentdate)*100 + DAY(currentdate),
           currentdate,
           YEAR(currentdate),
           MONTH(currentdate),
           DAY(currentdate),
           QUARTER(currentdate),
           WEEKOFYEAR(currentdate),
           DATE_FORMAT(currentdate,'%W'),
           DATE_FORMAT(currentdate,'%M'),
           'f',
           CASE DAYOFWEEK(currentdate) WHEN 1 THEN 't' WHEN 7 then 't' ELSE 'f' END);
        SET currentdate = ADDDATE(currentdate,INTERVAL 1 DAY);
    END WHILE;
END
//
DELIMITER ;

# Execute the stored procedure
CALL program_sql.CREA_CALENDARIO('2010-01-01','2030-01-01');

# Optimize the table
OPTIMIZE TABLE program_sql.CREA_CALENDARIO;
```

## Notes

- Adjust the schema name (`program_sql`) and table name (`CALENDARIO`) to match your database structure.
- Modify the date range in the `CALL` statement to generate the desired period of dates.
- The `date_key` is created as a numeric representation (YYYYMMDD) for easy sorting and querying.
- The procedure uses 't' for true and 'f' for false in boolean fields. You may want to adjust this to suit your preferences (e.g., using 1 and 0, or 'Y' and 'N').
- Consider adding indexes to frequently queried columns for improved performance.
- You can extend the table structure to include additional date attributes as needed for your specific use case (e.g., fiscal year, holidays, etc.).
